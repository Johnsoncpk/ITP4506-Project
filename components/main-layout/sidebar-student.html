<a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
  <i class="fas fa-bars"></i>
</a>
<nav id="sidebar" class="sidebar-wrapper">
  <div class="sidebar-content">
    <div class="sidebar-brand">
      <a href="http://127.0.0.1/itp4506/Attendance-Online-Web/user/home.html"
        >attendance-online</a
      >
      <div id="close-sidebar">
        <i class="fas fa-times"></i>
      </div>
    </div>
    <div class="sidebar-header">
      <div class="user-pic">
        <img
          class="img-responsive img-rounded"
          src="http://127.0.0.1/itp4506/Attendance-Online-Web/img/student-icon.png"
          alt="User picture"
        />
      </div>
      <div class="user-info">
        <span id="user-name">Johnson Chong </span>
        <span class="user-role">Student</span>
        <!--<button class="btn justify-content-end"><i class='fas fa-exclamation' style='font-size:24px;color:red'></i></button> -->
      </div>
      <div>
        <button id="notice" data-toggle="modal" data-target="#exampleModal" class="btn justify-content-end"><i style='font-size:20px;color:white' class="fas fa-envelope"></i></button>
      </div>
    </div>
    <!-- sidebar-header  -->

    <div class="sidebar-menu">
      <ul>
        <li class="header-menu">
          <span>General</span>
        </li>
        <li>
          <a href="http://127.0.0.1/itp4506/Attendance-Online-Web/student/profile.html">
            <i class="fas fa-id-card"></i>
            <span id="profile">Profile</span>
            <!-- <span class="badge badge-pill badge-primary">Beta</span> -->
          </a>
        </li>
        <li>
          <a
            href="http://127.0.0.1/itp4506/Attendance-Online-Web/student/report.html?type=student"
          >
            <i class="fas fa-chart-bar"></i>
            <span>Report</span>
            <!-- <span class="badge badge-pill badge-primary title='Please fill your information.'">Beta</span> -->
          </a>
        </li>
      </ul>
    </div>
    <!-- sidebar-menu  -->
  </div>
  <!-- sidebar-content  -->
  <div class="sidebar-footer">
    <a href="http://127.0.0.1/itp4506/Attendance-Online-Web/">
      Logout
      <i class="fas fa-sign-out-alt"></i>
    </a>
  </div>
</nav>
<!-- sidebar-wrapper  -->

<!-- modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" style="color:rgb(73, 119, 204)" id="exampleModalLabel">Sick Leave Certification Upload</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="recipient-name" style="color:rgb(73, 119, 204)" class="col-form-label">Illness:</label>
            <input type="text" value="Stomachache" class="form-control" id="recipient-name">
          </div>
          <div class="form-group">
            <label for="message-text" style="color:rgb(73, 119, 204)" class="col-form-label">Medical Certification:</label>
            <input type="file" class="form-control" id="recipient-name">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="upload" data-dismiss="modal">Upload</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
  crossorigin="anonymous"
></script>
<script
  src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
  crossorigin="anonymous"
></script>
<script>
  jQuery(function ($) {
    $("#user-name").text(
      localStorage.getItem("firstName") + " " + localStorage.getItem("lastName")
    );

    $("#upload").click(function(){
        $("#notice").hide();
      })

    $('#exampleModal').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget) // Button that triggered the modal
      var recipient = button.data('whatever') // Extract info from data-* attributes
      var modal = $(this)
    })

    $(".sidebar-dropdown > a").click(function () {
      $(".sidebar-submenu").slideUp(200);
      if ($(this).parent().hasClass("active")) {
        $(".sidebar-dropdown").removeClass("active");
        $(this).parent().removeClass("active");
      } else {
        $(".sidebar-dropdown").removeClass("active");
        $(this).next(".sidebar-submenu").slideDown(200);
        $(this).parent().addClass("active");
      }
    });

    $("#close-sidebar").click(function () {
      $(".page-wrapper").removeClass("toggled");
    });
    $("#show-sidebar").click(function () {
      $(".page-wrapper").addClass("toggled");
    });
    var url = "http://127.0.0.1/ITP4506/Attendance-Online-Server/student";
    $.ajax({
      type: "post",
      url: url + "/viewPersonal.php",
      data: {
        id: localStorage.getItem("id"),
      },
      success: function (data, status, xhr) {
        if(data[0].mobile==0){
          $('<span class="badge badge-pill badge-danger" title="Please finish your profile." >!</span> ').insertAfter('#profile');
        }
      },
      error: function (jqXhr, textStatus, errorMessage) {},
    });
  });
</script>
